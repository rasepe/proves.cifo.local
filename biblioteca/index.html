<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">


<!-- Bootstrap CSS -->
<link rel="stylesheet"
	href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
<!-- Datatable CSS -->
<link rel="stylesheet" type="text/css"
	href="https://cdn.datatables.net/1.10.20/css/dataTables.bootstrap4.css" />
<link rel="stylesheet" type="text/css"
	href="https://cdn.datatables.net/responsive/2.2.3/css/responsive.bootstrap4.css" />


<!-- Font Awsome -->
<link rel="stylesheet"
	href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">


<title>web.cifo.local.biblioteca</title>
<link rel="stylesheet" href="/css/style.css">
<style>
.col-3 {
	padding-right: 0;
	padding-left: 0;
	height: fit-content;
}

.card-header {
	background-color: #01A5D5 !important;
	color: white;
}


#headingTwo, #headingThree {
	background-color: #6c757d!important;
	padding: 0;
	
}

#headingTwo {
border-radius: calc(.25rem - 1px) calc(.25rem - 1px) 0 0!important;
}

.btn-link, .btn-link:hover {
	color: white;
}


.fa-file-text-o, .fa-user-circle {
padding: 10px;
}

#descripcion, #autores {
display: inline;
font-size: 1rem;
padding: -10px;
}


.card-header button {
padding: 0;
}

#buscar {
border-radius: calc(.25rem - 1px);
}

h2 {
    
}

</style>
</head>
<body>

	<!--Creación del Navegador ---------------------------------------------------------------------->

	<nav
		class="navbar navbar-expand-md fixed-top p-0 pr-2 navbar-dark bg-info">
		<div>
			<img src="/img/soc.jpg" height="55px" alt="Logo SOC"> <a
				class="navbar-brand p-0 m-0 d-inline-block text-wrap"
				style="line-height: 1em;" href="#">Servei d'Ocupació<br> de
				Catalunya
			</a>
		</div>
		<button class="navbar-toggler " type="button" data-toggle="collapse"
			data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown"
			aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse justify-content-end"
			id="navbarNavDropdown">
			<ul class="navbar-nav ">
				<li class="nav-item"><a class="nav-link" href="/centros/index.html">Centros</a></li>
				<li class="nav-item"><a class="nav-link" href="/oferta_formativa/index.html">Oferta
						formativa</a></li>
				<li class="nav-item active"><a class="nav-link" href="/biblioteca/index.html">Biblioteca</a></li>
				<li class="nav-item"><a class="nav-link" href="/contacto/index.html">Contacto</a></li>
				<li class="nav-item"><a
					class="nav-link d-block d-md-none d-lg-block"
					href="/campus/index.html">Campus virtual</a></li>
				<li class="nav-item"><a
					class="nav-link  d-block d-md-none d-lg-block" href="#">Entrar</a></li>
				<li class="nav-item"><a
					class="nav-link d-block d-md-none d-lg-block" href="#">Regístrate</a></li>
				<li class="nav-item dropdown d-none d-md-inline d-lg-none"><a
					class="nav-link dropdown-toggle" href="#"
					id="navbarDropdownMenuLink" role="button" data-toggle="dropdown"
					aria-haspopup="true" aria-expanded="false"> eCampus </a>
					<div class="dropdown-menu dropdown-menu-right"
						aria-labelledby="navbarDropdownMenuLink">
						<a class="dropdown-item" href="/campus/index.html">Campus
							Virtual</a> <a class="dropdown-item" href="#">Entrar</a> <a
							class="dropdown-item" href="#">Regístrate</a>
					</div></li>
			</ul>
		</div>
	</nav>

	<!-- Creación del breadcrumb y redes sociales---------------------------------------------------------------------->

	<div class="row mx-2 border-bottom border-secondary"
		style="margin-top: 55px">
		<div class="col p-0 ">
			<nav aria-label="breadcrumb">
				<ol class="breadcrumb m-0 mt-3 bg-transparent p-0">
					<li><i class="fa fa-home text-info"></i></li>
					<li class="breadcrumb-item text-info pl-2"><a
						href="/index.html">Inicio</a></li>
					<li class="breadcrumb-item active " aria-current="page">Biblioteca</li>
				</ol>
			</nav>
		</div>
		<div class="col d-flex py-2 justify-content-end align-items-center">
			<a class="mr-1 p-1 py-1 d-inline-block rounded-circle text-white"
				style="background-color: #1B1FBA" href="#"><i
				class="fa fa-facebook fa-fw "></i></a> <a
				class="mr-1 p-1 py-1 d-inline-block rounded-circle text-white"
				style="background-color: #00acee" href="#"><i
				class="fa fa-twitter fa-fw"></i></a> <a
				class="mr-1 p-1 py-1 d-inline-block rounded-circle text-white"
				style="background-color: #CC4115" href="#"><i
				class="fa fa-google-plus fa-fw"></i></a> <a
				class="mr-1 p-1 py-1 d-inline-block rounded-circle bg-dark text-white"
				href="#"><i class="fa fa-instagram fa-fw"></i></a> <a
				class="mr-1 p-1 py-1 d-inline-block rounded-circle bg-danger text-white"
				href="#"><i class="fa fa-pinterest fa-fw"></i></a>
		</div>
	</div>

	<!-- Creación del contenido ---------------------------------------------------------------------->

	<div class="row m-0 mb-2">
		<div class="col-12 pt-3">
			<h3>Biblioteca</h3>
		</div>
	</div>

	<div class="container-fluid">
		<div class="row m-0 pb-3 ">
			<!--  d-flex -->

			<div class="col-md-4 col-lg-3">

				<div class="card bg-light mb-3">
					<div class="card-header w-100" id="buscar">
						<i class="fa fa-search"></i>&nbsp;&nbsp;Buscar
					</div>
				</div>


				<div class="card bg-light mb-3">
					<div class="card-header w-100">
						<i class="fa fa-filter"></i>&nbsp;&nbsp;Filtrar
					</div>
					<div class="card-body">
			
						<!-- formulario -->

						<div class="form-group" id="selectores">

							<label for="exampleFormControlSelect1">Secciones</label> <select
								id="secciones" class="form-control">
								<option value="0">-- Escoja una sección --</option>
							</select> <small class="form-text text-muted"><em>Lista de
									secciones de la biblioteca</em></small>
						</div>
						<div class="form-group">
							<label for="exampleFormControlSelect1">Temas</label> <select
								id="temas" class="form-control">
								<option value="0">-- Escoja un tema --</option>
							</select> <small class="form-text text-muted"><em>Lista de
									temas de la biblioteca</em></small>
						</div>
						<div class="form-group">
							<label for="exampleFormControlSelect1">Editoriales</label> <select
								id="editoriales" class="form-control">
								<option value="0">-- Escoja una editorial --</option>
							</select> <small class="form-text text-muted"><em>Lista de
									editoriales</em></small>
						</div>
						<div class="d-flex justify-content-center">
							<button type="button" class="btn btn-danger mr-1" id="borrar"
								onclick="location.reload()">Borrar</button>
							<button type="button" class="btn btn-info ml-1" id="filtrar"
								onclick="filtrar()">Filtrar</button>
						</div>

					</div>

				</div>
			</div>

			<div class="col-8 col-sm-11 col-md-7 col-lg-9">

				<table id="libros" class="table table-striped table-bordered">

					<thead>
						<tr>
							<th>Isbn</th>
							<th>Cubierta</th>
							<th>Título</th>
							<!--  style="width: 30%" -->
							<th>Editorial</th>
							<th>Sección</th>
							<th>Tema</th>
						</tr>
					</thead>
					<tbody id="tbllibros"></tbody>
				</table>
			</div>


		</div>
		<!-- row -->
	</div>

	<!-- modal -->

	<div class="modal fade bd-example-modal-lg" id="myModal" tabindex="-1"
		role="dialog" aria-labelledby="myModalTitle" aria-hidden="true">
		<div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="myModalTitle"></h5>
					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<div class="container-fluid">
					
	
					
					
						<div class="accordion" id="accordionExample">

							<div class="d-flex justify-content-between">
								<!--  -between  -->
								<div id="parrafo1-1" class="p-2 flex-grow-1 w-75">
									<!-- flex-fill -->
									<!-- flex-grow-1 -->
								</div>
								<div id="parrafo1-2"
									class="p-2 flex-shrink-1 d-flex align-items-stretch mw-25">
									<!-- d-flex align-items-stretch -->
								</div>
							</div>

							<div class="card">
							
								<div class="card-header" id="headingTwo">
									<i class="fa fa-file-text-o"></i><h2 class="mb-0" id="descripcion">
										<button class="btn btn-link collapsed" type="button"
											data-toggle="collapse" data-target="#collapseTwo"
											aria-expanded="false" aria-controls="collapseTwo">
											Descripción</button>
									</h2>
								</div>
								<div id="collapseTwo" class="collapse"
									aria-labelledby="headingTwo" data-parent="#accordionExample">
									<div class="card-body"></div>
								</div>
							</div>
							
							
							<div class="card">
								<div class="card-header" id="headingThree">
									<i class="fa fa-user-circle" aria-hidden="true"></i><h2 class="mb-0" id="autores">
										<button class="btn btn-link collapsed" type="button"
											data-toggle="collapse" data-target="#collapseThree"
											aria-expanded="false" aria-controls="collapseThree">
											Autores</button>
									</h2>
								</div>
								<div id="collapseThree" class="collapse"
									aria-labelledby="headingThree" data-parent="#accordionExample">
									<div class="card-body"></div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary"
						data-dismiss="modal">Cerrar</button>
					<!--  <button type="button" class="btn btn-primary">Save changes</button> -->
				</div>
			</div>
		</div>
	</div>

	<!-- Creación del footer ---------------------------------------------------------------------->	
			<!-- ---------------redes sociales----------------------------------- -->
	<footer id="footer" class="container-fluid text-light">
		<div class="row d-flex justify-content-center align-items-center">
	      <a class="mr-1 p-1 py-2 d-inline-block  bg-transparent text-light" href="#"><i class="fa fa-twitter fa-2x fa-fw "></i></a>
	      <a class="mr-1 p-1 py-2 d-inline-block bg-transparent text-light" href="#"><i class="fa fa-facebook fa-2x fa-fw"></i></a>
	      <a class="mr-1 p-1 py-2 d-inline-block bg-transparent text-light" href="#"><i class="fa fa-google-plus fa-2x fa-fw"></i></a>
	      <a class="mr-1 p-1 py-2 d-inline-block bg-transparent text-light" href="#"><i class="fa fa-instagram fa-2x fa-fw"></i></a>
	      <a class="mr-1 p-1 py-2 d-inline-block bg-transparent text-light" href="#"><i class="fa fa-pinterest fa-2x fa-fw"></i></a>
		</div>
		   <!-- ---------------directo a----------------------------------- -->
		<div class="row mt-4">
			<div class="col-12 col-md-3 d-flex justify-content-center text-center">
				<ul type="none" class="p-0 mb-5 mb-md-2">
					<li class="text-white"><h6>DIRECTO A</h6></li>
					<li><a class="text-light" href="/centros/index.html">Centros</a></li>
					<li><a class="text-light" href="/oferta_formativa/index.html">Oferta formativa</a></li>
					<li><a class="text-light" href="/biblioteca/index.html">Biblioteca</a></li>
					<li><a class="text-light" href="/contacto/index.html">Contacto</a></li>
					<li><a class="text-light" href="/campus/index.html">Campus virtual</a></li>
					<li><a class="text-light" href="#">Entrar</a></li>
					<li><a class="text-light" href="#">Registrarse</a></li>
				</ul>
			</div>
			 <!-- ---------------ayuda----------------------------------- -->
			<div class="col-12 col-md-3 d-flex justify-content-center text-center">
				<ul type="none" class="p-0 mb-5 mb-md-2">
					<li class="text-white"><h6>AYUDA</h6></li>
					<li><a class="text-light" href="#">Sobre gencat</a></li>
					<li><a class="text-light" href="#">Accessibilitat</a></li>
					<li><a class="text-light" href="#">Mapa web</a></li>
					<li><a class="text-light" href="#legal">Aviso Legal</a></li>
				</ul>
			</div>
			 <!-- ---------------aviso legal--------------------------------- -->
			<div class="col-12 col-md-6">
				<div class="text-center d-flex justify-content-center">
					<h6 class="text-white" id="legal">SERVEI D'OCUPACIÓ DE CATALUNYA</h6>
				</div>
				<p class="col-12 d-flex justify-content-center class text-center mb-5 mb-md-2">
				 Aviso legal : De acuerdo con el artículo 17.1 de la Ley 19/2014, la © Generalidad de Cataluña permite la reutilización de los contenidos y de los datos siempre que
	se cite la fuente y la fecha de actualización y que no se desnaturalice la información (artículo 8 de la Ley 37/2007) y también que no se contradiga con una licencia específica.
				</p>
				
				<div class="row">
					<div class="col-6">
						<img src="/img/sepelogotip.jpg" title="logotipo sepe" alt="logotipo sepe" class="img-fluid">
					</div>
					<div class="col-6">
						<img src="/img/logotip_Iniciativaocupaciojuvenil_bn.jpg" title="logotipo sepe" alt="logotipo sepe" class="img-fluid">
					</div>
				</div>
			</div>
		</div>
		<div class="d-flex justify-content-center class text-center py-3 ">Copyright © Cifo 2018 </div>
     </footer>
	<!-- COOKIES--------------------->
     <div class="cookiealert-container text-center fixed-bottom" id="boxCookies" style="margin-bottom: 0em; background-color: #4a4c4a; color: white; padding: 2vh;"><p>Aviso informativo: este sitio web puede utilizar cookies para mejorar su navegación. Si quieres ver el contenido de este sitio web tendrás que aceptar las cookies según la legislación vigente en nuestro país. Si no aceptas, no podrás continuar navegando por este sitio web. Clique
     <button type="submit" class="btn btn-warning" id="btnCookies" class="btn btn-primary btn-sm acceptcookies" style="border-color: #78992f; background-color: #78992f; color: white;"> aquí </button> para aceptar las cookies.</p>
    </div>
	
	<!-- JQuery -->
	<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
	<!-- Popper -->
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
	<!-- Bootstrap -->
	<script
		src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
	<!-- Datatable -->
	<script type="text/javascript"
		src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.js"></script>
	<script type="text/javascript"
		src="https://cdn.datatables.net/1.10.20/js/dataTables.bootstrap4.js"></script>
	<script type="text/javascript"
		src="https://cdn.datatables.net/responsive/2.2.3/js/dataTables.responsive.js"></script>
	<script>

var tabla=$('#libros').DataTable({

	 "lengthMenu": [ 5, 10, 25, 50, 75, 100 ],
     responsive: true,
	language: {
        url: '/spanish.datatable.json'
    },
    	"columnDefs": [
            { "data": "Isbn"		,	"targets": 0 },
            { "data": "Cubierta"	,	"targets": 1 },
            { "data": "Título"	,	"targets": 2 },
            { "data": "Editorial",	"targets": 3 },
            { "data": "Sección"	,	"targets": 4 },
            { "data": "Tema"	,	"targets": 5 }

          ]
    
});




	getLibros();
	
function getLibros(codigoseccion, codigotema, codigoeditorial) {
	var xhr;
	if (window.XMLHttpRequest) {
		xhr = new XMLHttpRequest();
	} else {
		xhr = new ActiveXObject("Microsoft.XMLHTTP");
	}
	xhr.onreadystatechange = function() {
			if (xhr.readyState == 4 && xhr.status == 200) {
				var arrLibros = JSON.parse(xhr.responseText);

				for (var i = 0; i < arrLibros.records.length; i++) {

					tabla.row.add({
						"Isbn"		: '<a href="javascript:void(0)" onclick="getLibro('+arrLibros.records[i].id+')" data-toggle="modal" data-target=".bd-example-modal-sm">'+arrLibros.records[i].isbn+'</a>',
						"Cubierta"		: '<img src="'+arrLibros.records[i].cubierta+'" height="100px">',
						"Título"		: arrLibros.records[i].titulo,
						"Editorial"		: arrLibros.records[i].editorial,
						"Sección"		: arrLibros.records[i].seccion,
						"Tema"		: arrLibros.records[i].tema
					});
					

				}
				
				tabla.draw();

			}
			
			
	}
	if (codigoseccion != "") {
		codigoseccion = codigoseccion + '/'
	} 
	if (codigotema != "") {
		codigotema = codigotema + '/'
	} 
	if (codigoeditorial != "") {
		codigoeditorial = codigoeditorial + '/'
	} 

	xhr.open('GET', 'http://app.cifo.local/api/public/biblioteca/libros/seccion/'+codigoseccion+'tema/'+codigotema+'editorial/'+codigoeditorial+'?nocache='+Math.random(), true);
	xhr.send();

}

window.onpageshow=function()  {
	
	var xhr;
	if (window.XMLHttpRequest) {
		xhr = new XMLHttpRequest();
	} else {
		xhr = new ActiveXObject("Microsoft.XMLHTTP");
	}

		xhr.onreadystatechange = function() {
			if (xhr.readyState == 4 && xhr.status == 200) {
				var arrSecciones = JSON.parse(xhr.responseText);
				for (var i = 0; i < arrSecciones.records.length; i++) {
					document.getElementById("secciones").innerHTML += '<option id="'+ arrSecciones.records[i].id +'" value="' + arrSecciones.records[i].nombre + '">'+ arrSecciones.records[i].nombre +'</option>';
		
				}
				getEditoriales();
			}
			
			
		}

	
		xhr.open('GET', 'http://app.cifo.local/api/public/biblioteca/secciones/?nocache='+Math.random(), true);
		xhr.send(); 
}


function getEditoriales(codigoeditorial) {
	 if (codigoeditorial == undefined) {
		codigoeditorial = "";
	
	
	if (codigoeditorial != "") {
		codigoeditorial += '/';
	}  
		
	var xhr;
if (window.XMLHttpRequest) {
	xhr = new XMLHttpRequest();
} else {
	xhr = new ActiveXObject("Microsoft.XMLHTTP");
}

	xhr.onreadystatechange = function() {
		if (xhr.readyState == 4 && xhr.status == 200) {
			var arrEditoriales = JSON.parse(xhr.responseText);
			for (var i = 0; i < arrEditoriales.records.length; i++) {
				document.getElementById("editoriales").innerHTML += '<option id="'+ arrEditoriales.records[i].id +'" value="' + arrEditoriales.records[i].nombre + '">'+ arrEditoriales.records[i].nombre +'</option>';
	
			}
		}
	}
	xhr.open('GET', 'http://app.cifo.local/api/public/biblioteca/editoriales/'+codigoeditorial+'?nocache='+Math.random(), true);
	xhr.send();
	
}
}

//Mostra el segon selector quan seleccionem el primer 
document.getElementById("secciones").onchange = function() {
	document.getElementById("temas").innerHTML = '<option value="0">-- Escoja un tema --</option>';
		
		
		var seccioseleccionada = document.getElementById("secciones").selectedIndex;
		var codiseccio = document.getElementById("secciones").options[seccioseleccionada].id;
		
		if (window.XMLHttpRequest) {
			xhr = new XMLHttpRequest();
		} else {
			xhr = new ActiveXObject("Microsoft.XMLHTTP");
		}
		
			xhr.onreadystatechange = function() {
				if (xhr.readyState == 4 && xhr.status == 200) {
					var arrTemas = JSON.parse(xhr.responseText);
					for (var i = 0; i < arrTemas.records.length; i++) {
						document.getElementById("temas").innerHTML += '<option id="'+ arrTemas.records[i].id +'" value="' + arrTemas.records[i].nombre + '">'+ arrTemas.records[i].nombre +'</option>';
					}
				}
			}
			xhr.open('GET', 'http://app.cifo.local/api/public/biblioteca/temas/seccion/'+ codiseccio +'/&nocache=' +Math.random(), true);
			xhr.send();
	
}


function filtrar() {
	 <!--  codigoseccion, codigotema, codigoeditorial -->
	 //esborrem taula
	 tabla.clear().draw();
	
	 var posicionseccion = document.getElementById("secciones").selectedIndex;
	 var posiciontema = document.getElementById("temas").selectedIndex;
	 var posicioneditorial = document.getElementById("editoriales").selectedIndex;
	 var codigoseccion; 
	 var codigotema; 
	 var codigoeditorial;
	 for (i=0; i<document.getElementById("secciones").options.length; i++) {
		 if (i==posicionseccion) {
			 codigoseccion = document.getElementById("secciones").options[i].id;
		 }
	 }
	 for (i=0; i<document.getElementById("temas").options.length; i++) {
		 if (i==posiciontema) {
			 codigotema = document.getElementById("temas").options[i].id;
		 }
	 }
	 for (i=0; i<document.getElementById("editoriales").options.length; i++) {
		 if (i==posicioneditorial) {
			 codigoeditorial = document.getElementById("editoriales").options[i].id;
		 }
	 }
	
	getLibros(codigoseccion, codigotema, codigoeditorial); 
	 
	 
}

function getLibro(id){
	var xhr;
	window.sessionStorage.setItem("id_libro",id);
	if (window.XMLHttpRequest) {
			xhr = new XMLHttpRequest();
		} else {
			xhr = new ActiveXObject("Microsoft.XMLHTTP");
		}
	xhr.onreadystatechange = function() {
		var id_libro = window.sessionStorage.getItem("id_libro");
		if (xhr.readyState == 4 && xhr.status == 200) {
			var arrLibro = JSON.parse(xhr.responseText);				
					
					var titolmodal = "Libro";
					document.getElementById("myModalTitle").innerHTML = titolmodal;
					var cadena1='<table class="table table-striped table-bordered" id="taulamodal"><tbody>' //d-inline-block
					+'<tr><th>Isbn:</th><td>'+arrLibro.record.isbn+'</td>' // <td rowspan="9" colspan="1"><img id="imagencelda" src="'+arrLibro.record.cubierta+'" class="align-self-stretch"></td></tr>'    // <td rowspan="9"><img id="imagencelda" src="'+arrLibro.record.cubierta+'"></td></tr>' // <td ... style="background-image: url("'+arrLibro.record.cubierta+'");">    class="d-flex align-items-stretch"
					+'<tr><th>Título:</th><td>'+arrLibro.record.titulo+'</td></tr>'
					+'<tr><th>Subítulo:</th><td>'+arrLibro.record.subtitulo+'</td></tr>'
					+'<tr><th>Número de páginas:</th><td>'+arrLibro.record.numero_paginas+'</td></tr>'
					+'<tr><th>Editorial:</th><td>'+arrLibro.record.editorial.nombre+'</td></tr>'
					+'<tr><th>Año de publicación:</th><td>'+arrLibro.record.anio_publicacion+'</td></tr>'
					+'<tr><th>Tema:</th><td>'+arrLibro.record.tema.nombre+'</td></tr>'
					+'<tr><th>Sección:</th><td>'+arrLibro.record.seccion.nombre+'</td></tr>'
					+'<tr><th>Nivel:</th><td>'+arrLibro.record.nivel+'</td></tr>'
					+'</tbody></table>';
					
					
					var cadena2='<p>'+arrLibro.record.descripcion+'</p>';
					
					var cadena3='';
					for (var j=0; j<arrLibro.record.autores.length; j++) {
						
						cadena3 += '<img src="'+arrLibro.record.autores[j].foto+'" height="100px"></img>'+
						'<h5>'+arrLibro.record.autores[j].nombre+'&nbsp;'+arrLibro.record.autores[j].apellidos+'</h5>'+
						'<p>'+arrLibro.record.autores[j].biografia+'</p>';
					
						
					}
					
					
					var imatgemodal = '<img id="imagentabla" src="'+arrLibro.record.cubierta+'" class="align-self-stretch border rounded" style="object-fit:cover" >'; //class="align-self-stretch" //d-inline-block
					
					document.querySelector("#myModal #parrafo1-1").innerHTML = cadena1;
					document.querySelector("#myModal #parrafo1-2").innerHTML = imatgemodal;
					document.querySelector("#collapseTwo .card-body").innerHTML = cadena2;
					document.querySelector("#collapseThree .card-body").innerHTML = cadena3;

					$('#myModal').modal('show');				
			
		}

	}
	
	var id_libro = window.sessionStorage.getItem("id_libro");
	xhr.open('GET', 'http://app.cifo.local/api/public/biblioteca/libros/'+id_libro+'?nocache='+Math.random(), true);

	xhr.send();

}


</script>
<script src="/cookies.js"></script>
<script type="text/javascript">
  //Si detecta que la cookie esta ok, detecta que esta ok porque ya esta aceptada, elimina el hijo del elemento boxCookies, (por lo tanto no se muestra la maquetación html)
  if (detectCookie("okCookie")) {
	  if(getCookie("okCookie")=="ok") {
		  var objBoxRGPD=document.getElementById("boxCookies");
		  objBoxRGPD.parentNode.removeChild(objBoxRGPD);
	  }
  } else {
	  //elimina el hijo del elemento boxCookies cuando ha sido aceptada por el boton con el id"btnRGPD" (por lo tanto no se muestra la maquetación html)
	  document.getElementById("btnCookies").onclick=function(){
		  setCookie("okCookie","ok",365);
		  var objBoxCookies=document.getElementById("boxCookies");
		  objBoxCookies.parentNode.removeChild(objBoxCookies);
	  }
  }
</script>
</body>
</html>